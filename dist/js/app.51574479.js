(function(t){function e(e){for(var i,r,o=e[0],c=e[1],l=e[2],d=0,m=[];d<o.length;d++)r=o[d],s[r]&&m.push(s[r][0]),s[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);u&&u(e);while(m.length)m.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],i=!0,o=1;o<a.length;o++){var c=a[o];0!==s[c]&&(i=!1)}i&&(n.splice(e--,1),t=r(r.s=a[0]))}return t}var i={},s={app:0},n=[];function r(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=i,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(a,i,function(e){return t[e]}.bind(null,i));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"11b2":function(t,e,a){},1320:function(t,e,a){"use strict";var i=a("ece9"),s=a.n(i);s.a},"56d7":function(t,e,a){"use strict";a.r(e);a("5c07"),a("53da"),a("2556"),a("d0f8");var i=a("6e6d"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("md-app",{attrs:{"md-waterfall":"","md-mode":"fixed"}},[a("md-app-toolbar",{staticClass:"md-primary"},[a("span",{staticClass:"md-title"},[t._v("d3.js的可视化系统")])]),a("md-app-drawer",{attrs:{"md-permanent":"full"}},[a("md-toolbar",{staticClass:"md-transparent",attrs:{"md-elevation":"0"}},[t._v("\n        dashboard("+t._s(t.superstore.length)+"条数据)\n      ")]),a("md-list",[a("md-list-item",{on:{click:function(e){return t.linkTo("/")}}},[a("span",{staticClass:"md-list-item-text"},[t._v("piechart")])]),a("md-list-item",{on:{click:function(e){return t.linkTo("/histogram")}}},[a("span",{staticClass:"md-list-item-text"},[t._v("histogram")])]),a("md-list-item",{on:{click:function(e){return t.linkTo("/about")}}},[a("span",{staticClass:"md-list-item-text"},[t._v("Map")])])],1)],1),a("md-app-content",[a("router-view")],1)],1)],1)},n=[],r=(a("4453"),a("fa8b")),o=a("081a"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("div",{staticClass:"chart-title"},[t._v("饼图1")]),a("div",{staticClass:"chart-item"},[a("PieChart",{attrs:{chartId:"chart1",measure:t.measure,dimension1:"Region",dimension2:"State",dimension3:"City"}}),a("md-card",[a("md-card-header",[a("div",{staticClass:"md-title"},[t._v("在这里改变左侧饼图的量度")])]),a("md-card-content",[a("div",{staticClass:"line"},[a("span",{staticClass:"tip"},[t._v("利润(Profit)")]),a("md-switch",{attrs:{value:"Profit"},model:{value:t.measure,callback:function(e){t.measure=e},expression:"measure"}})],1),a("div",{staticClass:"line"},[a("span",{staticClass:"tip"},[t._v("数量(Quantity)")]),a("md-switch",{attrs:{value:"Quantity"},model:{value:t.measure,callback:function(e){t.measure=e},expression:"measure"}})],1),a("div",{staticClass:"line"},[a("span",{staticClass:"tip"},[t._v("销量(Sales)")]),a("md-switch",{attrs:{value:"Sales"},model:{value:t.measure,callback:function(e){t.measure=e},expression:"measure"}})],1),a("div",{staticClass:"line"},[a("span",{staticClass:"tip"},[t._v("运费(Shipping Cost)")]),a("md-switch",{attrs:{value:"Shipping Cost"},model:{value:t.measure,callback:function(e){t.measure=e},expression:"measure"}})],1),a("p",{staticClass:"indent"},[t._v("\n          该图的第一维度是Region,第二维度是State，第三维度是City。\n        ")]),a("p",{staticClass:"indent"},[t._v("\n          其中当上一维度选定时，下一维度的数据源就会进行过滤，只留下符合该条件的数据源进行可视化展示。如该图中选定Central US的时候，中间的圈就只会对中美地方的洲(state)的数据进行展示，当点击中间圈的某一个洲时，最外面一圈的城市位置就都是符合中间圈选定的那个洲\n        ")]),a("p",{staticClass:"indent"},[t._v("\n          还有一点的是，显示的数据是对量度进行累加操作的。\n        ")])])],1)],1),a("div",{staticClass:"chart-title"},[t._v("饼图2")]),a("div",{staticClass:"chart-item"},[a("PieChart",{attrs:{chartId:"chart2",measure:t.measure2,dimension1:"Category",dimension2:"Sub-Category",dimension3:""}}),a("md-card",[a("md-card-header",[a("div",{staticClass:"md-title"},[t._v("在这里改变左侧饼图的量度")])]),a("md-card-content",[a("div",{staticClass:"line"},[a("span",{staticClass:"tip"},[t._v("利润(Profit)")]),a("md-switch",{attrs:{value:"Profit"},model:{value:t.measure2,callback:function(e){t.measure2=e},expression:"measure2"}})],1),a("div",{staticClass:"line"},[a("span",{staticClass:"tip"},[t._v("数量(Quantity)")]),a("md-switch",{attrs:{value:"Quantity"},model:{value:t.measure2,callback:function(e){t.measure2=e},expression:"measure2"}})],1),a("div",{staticClass:"line"},[a("span",{staticClass:"tip"},[t._v("销量(Sales)")]),a("md-switch",{attrs:{value:"Sales"},model:{value:t.measure2,callback:function(e){t.measure2=e},expression:"measure2"}})],1),a("div",{staticClass:"line"},[a("span",{staticClass:"tip"},[t._v("运费(Shipping Cost)")]),a("md-switch",{attrs:{value:"Shipping Cost"},model:{value:t.measure2,callback:function(e){t.measure2=e},expression:"measure2"}})],1)])],1)],1),a("div",{staticClass:"chart-title"},[t._v("饼图3")]),a("div",{staticClass:"chart-item"},[a("PieChart",{attrs:{chartId:"chart3",measure:t.measure3,dimension1:t.dimension1}}),a("md-card",[a("md-card-header",[a("div",{staticClass:"md-title"},[t._v("在这里改变左侧饼图的量度、维度")])]),a("md-card-content",[a("p",[t._v("\n          维度\n        ")]),a("div",{staticClass:"line"},[a("span",{staticClass:"tip"},[t._v("Order Priority")]),a("md-switch",{attrs:{value:"Order Priority"},model:{value:t.dimension1,callback:function(e){t.dimension1=e},expression:"dimension1"}})],1),a("div",{staticClass:"line"},[a("span",{staticClass:"tip"},[t._v("Segment")]),a("md-switch",{attrs:{value:"Segment"},model:{value:t.dimension1,callback:function(e){t.dimension1=e},expression:"dimension1"}})],1),a("div",{staticClass:"line"},[a("span",{staticClass:"tip"},[t._v("Ship Mode")]),a("md-switch",{attrs:{value:"Ship Mode"},model:{value:t.dimension1,callback:function(e){t.dimension1=e},expression:"dimension1"}})],1),a("p",[t._v("\n          量度\n        ")]),a("div",{staticClass:"line"},[a("span",{staticClass:"tip"},[t._v("利润(Profit)")]),a("md-switch",{attrs:{value:"Profit"},model:{value:t.measure3,callback:function(e){t.measure3=e},expression:"measure3"}})],1),a("div",{staticClass:"line"},[a("span",{staticClass:"tip"},[t._v("数量(Quantity)")]),a("md-switch",{attrs:{value:"Quantity"},model:{value:t.measure3,callback:function(e){t.measure3=e},expression:"measure3"}})],1),a("div",{staticClass:"line"},[a("span",{staticClass:"tip"},[t._v("销量(Sales)")]),a("md-switch",{attrs:{value:"Sales"},model:{value:t.measure3,callback:function(e){t.measure3=e},expression:"measure3"}})],1),a("div",{staticClass:"line"},[a("span",{staticClass:"tip"},[t._v("运费(Shipping Cost)")]),a("md-switch",{attrs:{value:"Shipping Cost"},model:{value:t.measure3,callback:function(e){t.measure3=e},expression:"measure3"}})],1)])],1)],1)])},l=[],u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pie-chart"},[a("div",{style:{width:t.width+"px",height:t.height+"px"},attrs:{id:t.chartId}})])},d=[],m=a("a927"),p=a.n(m),h=(a("612f"),a("2205")),f=a.n(h),v=a("c41d");a("b06f");function g(){var t=Array.prototype.slice.call(arguments),e=t.reduce(function(t,e){return t+'<div class="tip-line">'+e+"</div>"},"");return e}function C(t,e){t.style("position","absolute").style("top","50%").style("left","50%").style("transform","translate(-50%, -50%)"),e&&t.style("z-index",e)}var y={tipLinesHtml:g,absoluteCenter:C},b=window.d3,x={name:"Pie",data:function(){return{dimension1_focus:"",dimension2_focus:""}},props:{width:{type:Number,default:700},height:{type:Number,default:700},chartId:{type:String,default:"pie-chart"},dimension1:{type:String,default:"Region"},dimension2:{type:String,default:""},dimension3:{type:String,default:""},measure:{type:String,default:"Sales"}},computed:{piedata1:function(){var t=this,e=this.$root.$data.superstore.map(function(e){return e[t.dimension1]}),a=Object(v["a"])(new f.a(e)),i={};a.forEach(function(t){return i[t]=0}),this.$root.$data.superstore.forEach(function(e){return i[e[t.dimension1]]+=p()(e[t.measure])});var s=a.map(function(t){return i[t]});return{indexSet:a,countArr:s,outerRadius:150,innerRadius:0,width:300,height:300,dimension:1}},piedata2Sourse:function(){var t=this;return this.$root.$data.superstore.filter(function(e){return e[t.dimension1]==t.dimension1_focus})},piedata2:function(){var t,e,a=this;if(""!=this.dimension2){var i=this.piedata2Sourse.map(function(t){return t[a.dimension2]});t=Object(v["a"])(new f.a(i));var s={};t.forEach(function(t){return s[t]=0}),this.piedata2Sourse.forEach(function(t){return s[t[a.dimension2]]+=p()(t[a.measure])}),e=t.map(function(t){return s[t]})}else t=[],e=[];return{indexSet:t,countArr:e,outerRadius:250,innerRadius:160,width:500,height:500,dimension:2}},piedata3Sourse:function(){var t=this;return this.$root.$data.superstore.filter(function(e){return e[t.dimension2]==t.dimension2_focus})},piedata3:function(){var t,e,a=this;if(""!=this.dimension3){var i=this.piedata3Sourse.map(function(t){return t[a.dimension3]});t=Object(v["a"])(new f.a(i));var s={};t.forEach(function(t){return s[t]=0}),this.piedata2Sourse.forEach(function(t){return s[t[a.dimension3]]+=p()(t[a.measure])}),e=t.map(function(t){return s[t]})}else t=[],e=[];return{indexSet:t,countArr:e,outerRadius:350,innerRadius:260,width:700,height:700,dimension:3}}},mounted:function(){window.piecharDom=this,this.pieChartSvg1=b.select("#"+this.chartId).append("svg"),y.absoluteCenter(this.pieChartSvg1,3),this.mountPieChart(this.piedata1,this.pieChartSvg1),this.pieChartSvg2=b.select("#"+this.chartId).append("svg"),y.absoluteCenter(this.pieChartSvg2,2),this.mountPieChart(this.piedata2,this.pieChartSvg2),this.pieChartSvg3=b.select("#"+this.chartId).append("svg"),y.absoluteCenter(this.pieChartSvg3,1),this.mountPieChart(this.piedata3,this.pieChartSvg3)},watch:{piedata1:function(t){this.pieChartSvg1&&this.mountPieChart(t,this.pieChartSvg1)},piedata2:function(t){this.pieChartSvg2&&this.mountPieChart(t,this.pieChartSvg2)},piedata3:function(t){this.pieChartSvg3&&this.mountPieChart(t,this.pieChartSvg3)}},methods:{mountPieChart:function(t,e){var a=this,i=t.width||this.width||400,s=t.height||this.height||400,n=t.countArr||[],r=t.indexSet||[],o=t.outerRadius||150,c=t.innerRadius||0;e.attr("width",i).attr("height",s),e.html("");var l=b.layout.pie(),u=l(n),d=b.svg.arc().innerRadius(c).outerRadius(o),m=e.selectAll("g").data(u).enter().append("g").attr("transform","translate("+i/2+","+i/2+")"),p=b.scale.category10();m.append("path").attr("fill",function(t,e){return p(e)}).attr("d",function(t){return d(t)}),m.append("text").attr("transform",function(t){return"translate("+d.centroid(t)+")"}).attr("text-anchor","middle").text(function(t,e){return t.endAngle-t.startAngle>.25?r[e]:""}),m.on("mouseover",function(t,e){b.select(this).style("opacity",.7);var a=b.select("body").append("div").attr("class","tooltip").style("opacity",0);a.transition().duration(300).style("opacity",0),a.transition().duration(100).style("opacity",.9),a.html(y.tipLinesHtml(r[e],t.data.toFixed(2))).style("left",b.event.pageX+28+"px").style("top",b.event.pageY-28+"px")}).on("mouseout",function(){b.select(this).style("opacity",1),b.select(".tooltip").remove()}),-1!=[1,2].indexOf(t.dimension)&&m.on("click",function(e,i){1==t.dimension?a.dimension1_focus=a.dimension1_focus==r[i]?"":r[i]:2==t.dimension&&(a.dimension2_focus=a.dimension2_focus==r[i]?"":r[i])})}}},_=x,S=(a("b46a"),a("17cc")),w=Object(S["a"])(_,u,d,!1,null,"21c8ee53",null),P=w.exports,k={name:"home",data:function(){return{measure:"Profit",measure2:"Profit",measure3:"Profit",dimension1:"Order Priority"}},components:{PieChart:P}},$=k,O=(a("1320"),Object(S["a"])($,c,l,!1,null,"1b64063a",null)),j=O.exports,R=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},A=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"about"},[a("h3",[t._v("\n    在各个州的利润\n  ")]),a("tr",[a("td",[t._v("选项")]),a("td",[a("input",{staticClass:"form-control mapaClick",attrs:{type:"radio",name:"mapa",value:"0",checked:""}}),t._v(" profit of all       ")]),a("br"),a("td",[a("input",{staticClass:"form-control mapaClick",attrs:{type:"radio",name:"mapa",value:"1"}}),t._v(" profit of technology       ")]),a("br"),a("td",[a("input",{staticClass:"form-control mapaClick",attrs:{type:"radio",name:"mapa",value:"2"}}),t._v(" profit of office_supplies       ")]),a("br"),a("td",[a("input",{staticClass:"form-control mapaClick",attrs:{type:"radio",name:"mapa",value:"3"}}),t._v(" profit of furniture       ")]),a("br")]),a("div",{attrs:{id:"map"}})])}],E=(a("3a23"),window.d3v4),H={data:function(){return{}},computed:{},mounted:function(){function t(t){var e=1e3,a=600,i=E.geoAlbersUsa().translate([e/2,a/2]).scale([1e3]),s=E.geoPath().projection(i),n=E.scaleQuantize().range(["#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"]),r=E.scaleQuantize().range(["#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"]);document.querySelector("#map").innerHTML="";var o=E.select("#map").append("g").append("svg").attr("width",e).attr("height",a);function c(t){var e=E.select("body").append("div").attr("class","tooltip").style("opacity",0);e.transition().duration(300).style("opacity",0),e.transition().duration(100).style("opacity",.9),e.html(y.tipLinesHtml(t.properties.name+" "+t.properties.Profit)).style("left",E.event.pageX+28+"px").style("top",E.event.pageY-28+"px")}function l(){E.selectAll(".tooltip").remove()}E.csv(t,function(t){console.log(t[0]),n.domain([E.min(t,function(t){return t.Profit>0?t.Profit:0}),E.max(t,function(t){return t.Profit})]),r.domain([E.min(t,function(t){return t.Profit<0?-t.Profit:999999999}),E.max(t,function(t){return t.Profit<0?-t.Profit:0})]),E.json("https://cdn.yice.org.cn/us-states.json",function(e){for(var a=0;a<t.length;++a)for(var i=t[a].State,u=p()(t[a].Profit),d=0;d<e.features.length;++d){var m=e.features[d].properties.name;if(i==m){e.features[d].properties.Profit=u;break}}o.selectAll("path").data(e.features).enter().append("path").attr("d",s).style("fill",function(t){var e=t.properties.Profit;return e>0?n(e):e<0?(console.log(e),e=0-e,r(e)):"#cccccc"}).on("mouseover",c).on("mouseout",l)})});E.zoom().scaleExtent([1,10]).on("zoom",u);function u(){circles_group.attr("transform","translate("+E.event.translate+")scale("+E.event.scale+")")}}function e(){console.log(this.value),0==this.value?t("https://cdn.yice.org.cn/zhanan/profit.csv"):1==this.value?t("https://cdn.yice.org.cn/zhanan/technology.csv"):2==this.value?t("https://cdn.yice.org.cn/zhanan/office_supplies.csv"):3==this.value&&t("https://cdn.yice.org.cn/zhanan/furniture.csv")}t("https://cdn.yice.org.cn/zhanan/profit.csv"),E.selectAll(".mapaClick").on("click",e)},methods:{addA:function(){this.a++}}},I=H,Q=Object(S["a"])(I,R,A,!1,null,"26793c44",null),M=Q.exports,z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"about"},[a("div",{staticClass:"chart-item"},[a("Histogram",{attrs:{chartId:"histogram1",dimension:t.dimension1,measure:t.measure1,filters:[]},model:{value:t.choosen1,callback:function(e){t.choosen1=e},expression:"choosen1"}}),a("md-card",[a("md-card-header",[a("div",{staticClass:"md-title"},[t._v("在这里改变左侧直方图的量度")])]),a("md-card-content",[a("p",[t._v("\n            量度\n          ")]),a("div",{staticClass:"line"},[a("span",{staticClass:"tip"},[t._v("利润(Profit)")]),a("md-switch",{attrs:{value:"Profit"},model:{value:t.measure1,callback:function(e){t.measure1=e},expression:"measure1"}})],1),a("div",{staticClass:"line"},[a("span",{staticClass:"tip"},[t._v("数量(Quantity)")]),a("md-switch",{attrs:{value:"Quantity"},model:{value:t.measure1,callback:function(e){t.measure1=e},expression:"measure1"}})],1),a("div",{staticClass:"line"},[a("span",{staticClass:"tip"},[t._v("销量(Sales)")]),a("md-switch",{attrs:{value:"Sales"},model:{value:t.measure1,callback:function(e){t.measure1=e},expression:"measure1"}})],1),a("div",{staticClass:"line"},[a("span",{staticClass:"tip"},[t._v("运费(Shipping Cost)")]),a("md-switch",{attrs:{value:"Shipping Cost"},model:{value:t.measure1,callback:function(e){t.measure1=e},expression:"measure1"}})],1)])],1)],1),a("div",{staticClass:"chart-item"},[a("Histogram",{attrs:{chartId:"histogram2",dimension:t.dimension2,measure:t.measure2,filters:t.filter2},model:{value:t.choosen2,callback:function(e){t.choosen2=e},expression:"choosen2"}}),a("md-card",[a("md-card-header",[a("div",{staticClass:"md-title"},[t._v("在这里改变左侧直方图的量度")])]),a("md-card-content",[a("p",[t._v("\n            量度\n          ")]),a("div",{staticClass:"line"},[a("span",{staticClass:"tip"},[t._v("利润(Profit)")]),a("md-switch",{attrs:{value:"Profit"},model:{value:t.measure2,callback:function(e){t.measure2=e},expression:"measure2"}})],1),a("div",{staticClass:"line"},[a("span",{staticClass:"tip"},[t._v("数量(Quantity)")]),a("md-switch",{attrs:{value:"Quantity"},model:{value:t.measure2,callback:function(e){t.measure2=e},expression:"measure2"}})],1),a("div",{staticClass:"line"},[a("span",{staticClass:"tip"},[t._v("销量(Sales)")]),a("md-switch",{attrs:{value:"Sales"},model:{value:t.measure2,callback:function(e){t.measure2=e},expression:"measure2"}})],1),a("div",{staticClass:"line"},[a("span",{staticClass:"tip"},[t._v("运费(Shipping Cost)")]),a("md-switch",{attrs:{value:"Shipping Cost"},model:{value:t.measure2,callback:function(e){t.measure2=e},expression:"measure2"}})],1)])],1)],1),a("div",{staticClass:"chart-item"},[a("Histogram",{attrs:{chartId:"histogram3",dimension:t.dimension3,measure:t.measure3,filters:t.filter3}}),a("md-card",[a("md-card-header",[a("div",{staticClass:"md-title"},[t._v("在这里改变左侧直方图的量度")])]),a("md-card-content",[a("p",[t._v("\n            量度\n          ")]),a("div",{staticClass:"line"},[a("span",{staticClass:"tip"},[t._v("利润(Profit)")]),a("md-switch",{attrs:{value:"Profit"},model:{value:t.measure3,callback:function(e){t.measure3=e},expression:"measure3"}})],1),a("div",{staticClass:"line"},[a("span",{staticClass:"tip"},[t._v("数量(Quantity)")]),a("md-switch",{attrs:{value:"Quantity"},model:{value:t.measure3,callback:function(e){t.measure3=e},expression:"measure3"}})],1),a("div",{staticClass:"line"},[a("span",{staticClass:"tip"},[t._v("销量(Sales)")]),a("md-switch",{attrs:{value:"Sales"},model:{value:t.measure3,callback:function(e){t.measure3=e},expression:"measure3"}})],1),a("div",{staticClass:"line"},[a("span",{staticClass:"tip"},[t._v("运费(Shipping Cost)")]),a("md-switch",{attrs:{value:"Shipping Cost"},model:{value:t.measure3,callback:function(e){t.measure3=e},expression:"measure3"}})],1)])],1)],1)])},T=[],L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"histogram"},[a("div",{style:{width:"1200px",height:t.height+"px"},attrs:{id:t.chartId}})])},N=[],U=a("056e"),X=a.n(U),Y=window.d3,q={name:"Histogram",props:{width:{type:Number,default:800},height:{type:Number,default:600},chartId:{type:String,default:"Histogram"},dimension:{type:String,default:"Region"},measure:{type:String,default:"Sales"},filters:{type:Array,default:[]}},computed:{dataSourse:function(){var t=this;if(console.log(this.filters),0==this.$root.$data.superstore.length)return[];var e=this.$root.$data.superstore.filter(function(e){return!t.filters.some(function(t){return e[t.index]!=t.value})});return e},histogramdata:function(){var t=this,e=this.dataSourse.map(function(e){return e[t.dimension]}),a=Object(v["a"])(new f.a(e)),i={};a.forEach(function(t){return i[t]=0}),this.$root.$data.superstore.forEach(function(e){return i[e[t.dimension]]+=p()(e[t.measure])});var s=a.map(function(t){return i[t]});return{indexSet:a,countArr:s}}},model:{prop:"model",event:"change"},mounted:function(){this.histogramSvg=Y.select("#"+this.chartId).append("svg"),y.absoluteCenter(this.histogramSvg),this.mountHistogram(this.histogramdata,this.histogramSvg)},watch:{histogramdata:function(t){this.histogramSvg&&this.mountHistogram(t,this.histogramSvg)}},methods:{mountHistogram:function(t,e){var a=this,i=100*t.countArr.length;i=i<this.width?this.width:i,i=i>1200?1200:this.width;var s=this.height||400,n=t.countArr||[],r=t.indexSet||[],o={left:100,right:100,top:20,bottom:20};e.attr("height",s).attr("width",i),e.html("");var c=Y.scale.ordinal().domain(r).rangeRoundBands([0,i-o.left-o.right]),l=Y.scale.linear().domain([0,Y.max(n.map(function(t){return Math.abs(t)}))]).range([s-o.top-o.bottom,0]),u=Y.svg.axis().scale(c).orient("bottom"),d=Y.svg.axis().scale(l).orient("left"),m=8,p=Y.scale.linear().domain([X()(Y.min(n)),-.1,0,X()(Y.max(n))+1]).range(["#ffc107","#ffe082","#afbfff","#455ede"]),h=e.selectAll(".MyRect").data(n).enter().append("rect").attr("class","MyRect");h.attr("transform","translate("+o.left+","+o.top+")").attr("fill",function(t){return t>0?p(t):(console.log(t),console.log(p(t)),"#b30000")}).attr("x",function(t,e){return c(r[e])+m/2}).attr("width",c.rangeBand()-m).attr("y",function(t){var e=l.domain()[0];return l(e)}).attr("height",function(t){return 0}).transition().delay(function(t,e){return 200*e}).duration(2e3).ease("bounce").attr("y",function(t){return l(t>0?t:-t)}).attr("height",function(t){return s-o.top-o.bottom-l(t)>0?s-o.top-o.bottom-l(t):-(s-o.top-o.bottom-l(t))}),h.on("mouseover",function(t,e){Y.select(this).style("opacity",.7);var a=Y.select("body").append("div").attr("class","tooltip").style("opacity",0);a.transition().duration(3e3).style("opacity",0),a.transition().duration(1e3).style("opacity",.9),a.html(y.tipLinesHtml(r[e],t.toFixed(2))).style("left",Y.event.pageX+28+"px").style("top",Y.event.pageY-28+"px")}).on("mouseout",function(){Y.select(this).style("opacity",1),Y.selectAll(".tooltip").remove()}).on("click",function(t,e){console.log(t,e,r[e]),a.$emit("change",r[e])}),e.append("g").attr("class","axis").attr("transform","translate("+o.left+","+(s-o.bottom)+")").call(u).append("text").text(this.dimension).attr("transform","translate("+(i-o.left-o.right+5)+", 5)"),e.append("g").attr("class","axis").attr("transform","translate("+o.left+","+o.top+")").call(d).append("text").text(this.measure).attr("transform","translate(-34, -10)")}}},B=q,F=(a("cd26"),Object(S["a"])(B,L,N,!1,null,null,null)),J=F.exports,D={name:"HistogramPage",data:function(){return{dimension1:"Region",measure1:"Profit",choosen1:"",dimension2:"State",measure2:"Profit",choosen2:"",dimension3:"City",measure3:"Profit"}},computed:{filter2:function(){return console.log([{index:this.dimension1,value:this.choosen1||""}]),[{index:this.dimension1,value:this.choosen1||""}]},filter3:function(){return[{index:this.dimension1,value:this.choosen1||""},{index:this.dimension2,value:this.choosen2||""}]}},components:{Histogram:J}},G=D,K=(a("6a24"),Object(S["a"])(G,z,T,!1,null,"4d8a25f8",null)),V=K.exports;i["default"].use(o["a"]);var W=new o["a"]({routes:[{path:"/",name:"home",component:j},{path:"/about",name:"about",component:M},{path:"/histogram",name:"histogram",component:V}]}),Z=a("9875"),tt=a.n(Z),et=a("c5cf"),at={dataUrl:"https://cdn.yice.org.cn/data.csv"},it=(a("5cba"),a("9640"),void 0);i["default"].use(tt.a),i["default"].config.productionTip=!1;var st={name:"app",data:function(){return{superstore:[]}},methods:{linkTo:function(t,e,a){this.$router.push({path:t,params:a||{},query:e||{}})}},router:W,render:function(t){return t(it)},mounted:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,et["a"](at.dataUrl);case 2:this.$data.superstore=t.sent,console.log(this.$data.superstore[0]);case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},nt=st,rt=(a("5c0b"),Object(S["a"])(nt,s,n,!1,null,null,null)),ot=rt.exports;new i["default"](ot).$mount("#app")},"5c0b":function(t,e,a){"use strict";var i=a("7508"),s=a.n(i);s.a},"6a24":function(t,e,a){"use strict";var i=a("11b2"),s=a.n(i);s.a},7508:function(t,e,a){},b46a:function(t,e,a){"use strict";var i=a("d2b9"),s=a.n(i);s.a},c014:function(t,e,a){},cd26:function(t,e,a){"use strict";var i=a("c014"),s=a.n(i);s.a},d2b9:function(t,e,a){},ece9:function(t,e,a){}});
//# sourceMappingURL=app.51574479.js.map